<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rock paper scissors</title>
  <style>
  div{
  background-color: rgb(198, 240, 253);
  height: 180px;
  width: 200px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}
  </style>
</head>
<body>
    <div>
      <p> Rock Paper Scissors GAME :</p>
    </div>
    <div>
      <button onclick="
      playGame('rock');
      ">
        Rock
      </button>
      <button onclick="
      playGame('paper');
      ;"   >
        Paper
      </button>
      <button onclick="
      playGame('scissors');
      " >
        Scissors
      </button>
    </div>
  
    <div>
       <div> <p class = "res">Result :</p></div>
        <p class = "phase">You - Computer</p>
        <p class="gg"> Score :</p></div>
        <div>
          <button onclick="reset()" >Reset</button>
        </div>
    </div>
    <script>
        //if const realonly property error
        //add query selector to local storage cuz the other is 
        //local
     let score = JSON.parse(localStorage.getItem
     ('score')) || {
      wins : 0,
      losses : 0,
      ties : 0,
     };
     updateScore();
     function updateScore(){
      document.querySelector('.gg').innerText=
    'Score :' +
    '\nWins: '+ score.wins
    +' Losses: ' + score.losses
    +' Ties: ' + score.ties
  ;
     }

      /*  if (!score){
          score = {
            wins:0,
            losses:0,
            ties:0
          }
      }
      */
      let computerMove , result = '';
      //computer move fct___________
      function reset(){
        score.wins=0,
        score.losses=0,
        score.ties=0;
        localStorage.removeItem('score');
        updateScore();
        
      }
      function pickComputerMove(){
      let randomNum = Math.random();
      if (randomNum >= 0 && randomNum < 1/3){
        computerMove='rock';
        //console.log('Bot moved: ' + computerMove);
      }
      else if (randomNum >= 1/3 && randomNum < 2/3){
        computerMove='paper';
        //console.log('Bot moved: ' + computerMove);
      }
      else if (randomNum >= 2/3 && randomNum < 1){
        computerMove='scissors';
        //console.log('Bot moved: ' + computerMove);
      }
    }
    /*
      function pickRock(){
        if (computerMove==='rock'){
        result ='Tie.'
        alert('You picked rock. \nComputer picked ' + computerMove + '. \n' +result);

      } 
      else if (computerMove==='paper'){
        result = 'You lose .'
        alert('You picked rock. \nComputer picked ' + computerMove + '. \n' +result);
      }
      else if (computerMove==='scissors'){
        result = 'You win ';
        alert('You picked rock. \n Computer picked ' + computerMove + '. \n' +result);
      }
      //return result;
      }
      function pickPaper(){
        if (computerMove==='rock'){
      result ='You win.'
      alert('You picked paper. \nComputer picked ' + computerMove + '. \n' +result);

    } 
    else if (computerMove==='paper'){
      result = 'Tie.'
      alert('You picked paper. \nComputer picked ' + computerMove + '. \n' +result);
    }
    else if (computerMove==='scissors'){
      result = 'You lose.';
      alert('You picked paper. \n Computer picked ' + computerMove + '. \n' +result);
    }
    //return result;
      }
      function pickScissors(){
      if (computerMove==='rock'){
      result ='You lose.'
      alert('You picked scissors. \nComputer picked ' + computerMove + '. \n' +result);
      
    } 
    else if (computerMove==='paper'){
      result = 'You win.'
      alert('You picked scissors. \nComputer picked ' + computerMove + '. \n' +result);
    }
    else if (computerMove==='scissors'){
      result = 'Tie.';
      alert('You picked scissors. \n Computer picked ' + computerMove + '. \n' +result);
    }
    //return result;
    }
    */
   //here we combine the functions to create a new
   //better function 
    function playGame(playerMove){

      pickComputerMove();
      //if he choses scissors
      if(playerMove==='scissors'){
        if (computerMove==='rock'){
        result ='You lose.'
        //alert('You picked scissors. \nComputer picked ' + computerMove + '. \n' +result); 
      } 
      else if (computerMove==='paper'){
        result = 'You win.'
        //alert('You picked scissors. \nComputer picked ' + computerMove + '. \n' +result);
      }
      else if (computerMove==='scissors'){
        result = 'Tie.';
      }
      }
      //if he choses paper
      else if (playerMove==='paper'){
        if (computerMove==='rock'){
        result ='You win.'
        //alert('You picked paper. \nComputer picked ' + computerMove + '. \n' +result);

      } 
        else if (computerMove==='paper'){
          result = 'Tie.'
          //alert('You picked paper. \nComputer picked ' + computerMove + '. \n' +result);
      }
        else if (computerMove==='scissors'){
          result = 'You lose.';
      }
    }
    //if he choses rock
    else if (playerMove==='rock'){
      if (computerMove==='rock'){
        result ='Tie.'
        //alert('You picked rock. \nComputer picked ' + computerMove + '. \n' +result);

      } 
      else if (computerMove==='paper'){
        result = 'You lose.'
        //alert('You picked rock. \nComputer picked ' + computerMove + '. \n' +result);
      }
      else if (computerMove==='scissors'){
        result = 'You win.';
      }  
    }
      if(result==='You win.'){
        score.wins++;
      }
      else if (result==='You lose.'){
        score.losses++;
      }
      //shortcut
      result==='Tie.' && score.ties++;
      //save result in session
      localStorage.setItem('score', JSON.stringify(score));
      //show result
    // alert('You picked '+ playerMove+'. '+'  \nComputer picked ' + computerMove + '. \n' +result
    //   +'\nWins: '+ score.wins
    //   +' Losses: ' + score.losses
    //   +' Ties: ' + score.ties
    // );
    document.querySelector('.res').innerHTML = result;
    document.querySelector('.phase').innerHTML = 
    'You: '+ '<img src=images/'+playerMove+'-emoji.png>'+ ' - Computer: ' + computerMove + '\n';
    updateScore();
  // document.querySelector('.gg').innerText=
  //   'Score :' +
  //   '\nWins: '+ score.wins
  //   +' Losses: ' + score.losses
  //   +' Ties: ' + score.ties
  // ;
}
 </script>

</body>
</html>